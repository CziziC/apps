<template name="instance_trace_detail_modal" >
	<div class="modal fade instance-trace-detail-modal" id="instance_trace_detail_modal" role="dialog" aria-labelledby="instance_trace_detail_modal_label">
		<div class="modal-dialog" role="document">
			<div class="modal-content ins-modal">
				<div class="modal-header">
					<h4 class="modal-title" id="instance_trace_detail_modal_label">{{_t "instance_approve_title_label"}} {{this.handler_name}}</h4>
				</div>
				<div class="modal-body modal-zoom weui_cells weui_cells_form">
					{{#if this.from_user_name}}
						<div class="weui_cell">
							<div class="weui_cell_hd">
								{{#if isCC this}}
									<span class="weui_label">{{_t "instance_approve_from_user_name_label"}}</span>
								{{/if}}
								{{#if isForward this}}
									<span class="weui_label">{{_t "instance_approve_from_user_name_label_forward"}}</span>
								{{/if}}
							</div>
							<div class="weui_cell_bd weui_cell_primary text-muted">
								<span class="weui_input">{{this.from_user_name}}</span>
							</div>
						</div>
					{{/if}}
					{{#if unempty this.finish_date}}
						{{#if getApproveStatusText this.judge}}
							<div class="weui_cell">
								<div class="weui_cell_hd">
									<span class="weui_label">{{_t "instance_approve_status_text_label"}}</span>
								</div>
								<div class="weui_cell_bd weui_cell_primary text-muted">
									<span class="weui_input status {{this.judge}}">
										<span class='{{getApproveStatusIcon this.judge}}'></span>
										<span>{{getApproveStatusText this.judge}}</span>
									</span>
								</div>
							</div>
						{{/if}}
					{{else}}
						{{#unless isCC this}}
							{{#unless isForward this}}
								<div class="weui_cell">
									<div class="weui_cell_hd">
										<span class="weui_label">{{_t "instance_approve_status_text_label"}}</span>
									</div>
									<div class="weui_cell_bd weui_cell_primary text-muted">
										<span class="weui_input status pending">
											<span class='ion ion-ios-loop'></span>
											<span>{{_t "instance_in_progress"}}</span>
										</span>
									</div>
								</div>
							{{/unless}}
						{{/unless}}
					{{/if}}
					{{#if this.is_finished}}
						{{#if unempty this.description}}
							<div class="weui_cell">
								<div class="weui_cell_hd">
									<span class="weui_label">{{_t "instance_approve_description_label"}}</span>
								</div>
								<div class="weui_cell_bd weui_cell_primary text-muted">
									<span class="weui_input">{{this.description}}</span>
								</div>
							</div>
						{{/if}}
					{{else}}
						{{#if (unempty (myApproveDescription this._id))}}
							<div class="weui_cell">
								<div class="weui_cell_hd">
									<span class="weui_label">{{_t "instance_approve_description_label"}}</span>
								</div>
								<div class="weui_cell_bd weui_cell_primary text-muted">
									<span class="weui_input">{{myApproveDescription this._id}}</span>
								</div>
							</div>
						{{/if}}
					{{/if}}
					<div class="weui_cell">
						<div class="weui_cell_hd">
							<span class="weui_label">{{_t "instance_approve_start_date_label"}}</span>
						</div>
						<div class="weui_cell_bd weui_cell_primary text-muted">
							<span class="weui_input">{{dateFormat this.start_date}}</span>
						</div>
					</div>
					{{#if unempty this.finish_date}}
						<div class="weui_cell">
							<div class="weui_cell_hd">
								<span class="weui_label">{{_t "instance_approve_finish_date_label"}}</span>
							</div>
							<div class="weui_cell_bd weui_cell_primary text-muted">
								<span class="weui_input">{{dateFormat this.finish_date}}</span>
							</div>
						</div>
					{{/if}}
					{{#unless this.is_finished}}
						<div class="weui_cell">
							<div class="weui_cell_hd">
								<span class="weui_label">{{_t "instance_approve_read"}}</span>
							</div>
							<div class="weui_cell_bd weui_cell_primary text-muted">
								<span class="weui_input">
									{{#if this.is_read}}
										{{_t "instance_approve_read_yes"}}
									{{else}}
										{{_t "instance_approve_read_no"}}
									{{/if}}
								</span>
							</div>
						</div>
					{{/unless}}
					{{#if isForward this}}
						<div class="weui_cell">
							<div class="weui_cell_hd">
								<span class="weui_label">{{_t "instance_forward_instance_look"}}</span>
							</div>
							<div class="weui_cell_bd weui_cell_primary text-muted">
								<span class="weui_input">
									<button type="button" class="btn btn-default btn-forward-instance-look pull-left" data-forwardspace="{{forward_space}}" data-forwardinstance="{{forward_instance}}">{{_t "instance_forward_instance_look"}}</button>
								</span>
							</div>
						</div>
					{{/if}}
				</div>
				<div class="modal-footer">
					{{#if showDeleteButton this}}
						<button type="button" class="btn btn-default btn-cc-approve-remove pull-left" data-approve="{{_id}}">{{_t "instance_approve_cc_remove"}}</button>
					{{/if}}
					{{#if showForwardDeleteButton this}}
						<button type="button" class="btn btn-default btn-forward-approve-remove pull-left" data-approve="{{_id}}" data-trace="{{trace}}">{{_t "instance_approve_forward_remove"}}</button>
					{{/if}}
					<button type="button" class="btn btn-primary btn-close">{{_t "instance_approve_close_modal"}}</button>
				</div>
			</div>
		</div>
	</div>
</template>