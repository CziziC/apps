# 文件退回
## 按钮显示规则
- 待审核箱
- 文件不是传阅
- 签核历程中当前步骤上一步骤不是会签，并且不是重定位
- 当前步骤为填写或者审批或者会签
- 点击“退回”，弹出提示框，上面是一个退回原因文本框(非必填)，下边加一句：“确定退回至+上一步的步骤名(上一步的处理人)”，给出“确定”和“取消”按钮。

## 逻辑
- 根据按钮显示规则校验
- 如果当前步骤是会签则：即 A步骤 的下一步为B步骤（会签），A的执行者a 发给 B1、B2、B3会签后，B1/2/3 增加“退回” ，如果B1执行退回则回到A（a），并取消未提交的B2 B3，即使B2 B3已经提交了B1也可执行退回 。
- 退回到签核历程前一条记录（生成新的签核记录）
- 修改instance的inbox_users，outbox_users
- 给新的inbox_users发送push，给当前用户发送push用于重新计算badge
